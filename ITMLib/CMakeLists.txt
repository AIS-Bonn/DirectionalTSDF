#############################
# CMakeLists.txt for ITMLib #
#############################

###########################
# Specify the target name #
###########################

SET(targetname ITMLib)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

################################
# Specify the libraries to use #
################################

INCLUDE(${PROJECT_SOURCE_DIR}/cmake/UseCUDA.cmake)
INCLUDE(${PROJECT_SOURCE_DIR}/cmake/UseOpenMP.cmake)

#############################
# Specify the project files #
#############################

##
SET(ITMLIB_TOPLEVEL_CPU_SOURCES
  CPUInstantiations.cpp
  )

SET(ITMLIB_TOPLEVEL_CUDA_SOURCES
  CUDAInstantiations.cu
  )

SET(ITMLIB_TOPLEVEL_HEADERS
  ITMLibDefines.h
  )

##
SET(ITMLIB_CORE_SOURCES
  Core/ITMBasicEngine.tpp
  Core/ITMDenseMapper.tpp
  )

SET(ITMLIB_CORE_HEADERS
  Core/ITMBasicEngine.h
  Core/ITMDenseMapper.h
  Core/ITMMainEngine.h
  Core/ITMTrackingController.h
  )

##
SET(ITMLIB_ENGINES_LOWLEVEL_SOURCES
  Engines/LowLevel/ITMLowLevelEngineFactory.cpp
  )

SET(ITMLIB_ENGINES_LOWLEVEL_HEADERS
  Engines/LowLevel/ITMLowLevelEngineFactory.h
  )

##
SET(ITMLIB_ENGINES_LOWLEVEL_CPU_SOURCES
  Engines/LowLevel/CPU/ITMLowLevelEngine_CPU.cpp
  )

SET(ITMLIB_ENGINES_LOWLEVEL_CPU_HEADERS
  Engines/LowLevel/CPU/ITMLowLevelEngine_CPU.h
  )

##
SET(ITMLIB_ENGINES_LOWLEVEL_CUDA_SOURCES
  Engines/LowLevel/CUDA/ITMLowLevelEngine_CUDA.cu
  )

SET(ITMLIB_ENGINES_LOWLEVEL_CUDA_HEADERS
  Engines/LowLevel/CUDA/ITMLowLevelEngine_CUDA.h
  )

##
SET(ITMLIB_ENGINES_LOWLEVEL_INTERFACE_HEADERS
  Engines/LowLevel/Interface/ITMLowLevelEngine.h
  )

##
SET(ITMLIB_ENGINES_LOWLEVEL_SHARED_HEADERS
  Engines/LowLevel/Shared/ITMLowLevelEngine_Shared.h
  )

##
SET(ITMLIB_ENGINES_MESHING_HEADERS
  Engines/Meshing/ITMMeshingEngineFactory.h
  )

##
SET(ITMLIB_ENGINES_MESHING_CPU_SOURCES
  Engines/Meshing/CPU/ITMMeshingEngine_CPU.tpp
  )

SET(ITMLIB_ENGINES_MESHING_CPU_HEADERS
  Engines/Meshing/CPU/ITMMeshingEngine_CPU.h
  )

##
SET(ITMLIB_ENGINES_MESHING_CUDA_SOURCES
  Engines/Meshing/CUDA/ITMMeshingEngine_CUDA.tcu
  )

SET(ITMLIB_ENGINES_MESHING_CUDA_HEADERS
  Engines/Meshing/CUDA/ITMMeshingEngine_CUDA.h
  )

##
SET(ITMLIB_ENGINES_MESHING_INTERFACE_HEADERS
  Engines/Meshing/Interface/ITMMeshingEngine.h
  )

##
SET(ITMLIB_ENGINES_MESHING_SHARED_HEADERS
  Engines/Meshing/Shared/ITMMeshingEngine_Shared.h
  )

SET(ITMLIB_ENGINES_RECONSTRUCTION_HEADERS
  Engines/Reconstruction/ITMSceneReconstructionEngineFactory.h
  )

##
SET(ITMLIB_ENGINES_RECONSTRUCTION_CPU_SOURCES
  Engines/Reconstruction/CPU/ITMSceneReconstructionEngine_CPU.tpp
  )

SET(ITMLIB_ENGINES_RECONSTRUCTION_CPU_HEADERS
  Engines/Reconstruction/CPU/ITMSceneReconstructionEngine_CPU.h
  )

##
SET(ITMLIB_ENGINES_RECONSTRUCTION_CUDA_SOURCES
  Engines/Reconstruction/CUDA/ITMSceneReconstructionEngine_CUDA.tcu
  )

SET(ITMLIB_ENGINES_RECONSTRUCTION_CUDA_HEADERS
  Engines/Reconstruction/CUDA/ITMSceneReconstructionEngine_CUDA.h
  Engines/Reconstruction/CUDA/ITMSceneReconstructionHelpers_CUDA.h
  )

##
SET(ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_SOURCES
  )

SET(ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_HEADERS
  Engines/Reconstruction/Interface/ITMSceneReconstructionEngine.h
  )

##
SET(ITMLIB_ENGINES_RECONSTRUCTION_SHARED_HEADERS
  Engines/Reconstruction/Shared/ITMSceneReconstructionEngine_Shared.h
  )

##
SET(ITMLIB_ENGINES_STATS_SOURCES
  Engines/Logging/ITMLoggingEngine.cpp
  )

SET(ITMLIB_ENGINES_STATS_HEADERS
  Engines/Logging/ITMLoggingEngine.h
  )

##
SET(ITMLIB_ENGINES_VIEWBUILDING_SOURCES
  Engines/ViewBuilding/ITMViewBuilderFactory.cpp
  )

SET(ITMLIB_ENGINES_VIEWBUILDING_HEADERS
  Engines/ViewBuilding/ITMViewBuilderFactory.h
  )

##
SET(ITMLIB_ENGINES_VIEWBUILDING_CPU_SOURCES
  Engines/ViewBuilding/CPU/ITMViewBuilder_CPU.cpp
  )

SET(ITMLIB_ENGINES_VIEWBUILDING_CPU_HEADERS
  Engines/ViewBuilding/CPU/ITMViewBuilder_CPU.h
  )

##
SET(ITMLIB_ENGINES_VIEWBUILDING_CUDA_SOURCES
  Engines/ViewBuilding/CUDA/ITMViewBuilder_CUDA.cu
  )

SET(ITMLIB_ENGINES_VIEWBUILDING_CUDA_HEADERS
  Engines/ViewBuilding/CUDA/ITMViewBuilder_CUDA.h
  )

##
SET(ITMLIB_ENGINES_VIEWBUILDING_INTERFACE_HEADERS
  Engines/ViewBuilding/Interface/ITMViewBuilder.h
  )

##
SET(ITMLIB_ENGINES_VIEWBUILDING_SHARED_HEADERS
  Engines/ViewBuilding/Shared/ITMViewBuilder_Shared.h
  )

##
SET(ITMLIB_ENGINES_VISUALISATION_SOURCES
  )

SET(ITMLIB_ENGINES_VISUALISATION_HEADERS
  Engines/Visualisation/ITMVisualisationEngineFactory.h
  )

##
SET(ITMLIB_ENGINES_VISUALISATION_CPU_SOURCES
  Engines/Visualisation/CPU/ITMVisualisationEngine_CPU.tpp
  )

SET(ITMLIB_ENGINES_VISUALISATION_CPU_HEADERS
  Engines/Visualisation/CPU/ITMVisualisationEngine_CPU.h
  )

##
SET(ITMLIB_ENGINES_VISUALISATION_CUDA_SOURCES
  Engines/Visualisation/CUDA/ITMVisualisationHelpers_CUDA.cu
  Engines/Visualisation/CUDA/ITMVisualisationEngine_CUDA.tcu
  )

SET(ITMLIB_ENGINES_VISUALISATION_CUDA_HEADERS
  Engines/Visualisation/CUDA/ITMVisualisationHelpers_CUDA.h
  Engines/Visualisation/CUDA/ITMVisualisationEngine_CUDA.h
  )

##
SET(ITMLIB_ENGINES_VISUALISATION_INTERFACE_SOURCES
  Engines/Visualisation/Interface/ITMVisualisationEngine.cpp
  )

SET(ITMLIB_ENGINES_VISUALISATION_INTERFACE_HEADERS
  Engines/Visualisation/Interface/ITMVisualisationEngine.h
  )

SET(ITMLIB_ENGINES_VISUALISATION_SHARED_HEADERS
  Engines/Visualisation/Shared/ITMVisualisationEngine_Shared.h
  )

##
SET(ITMLIB_OBJECTS_CAMERA_SOURCES
  Objects/Camera/ITMCalibIO.cpp
  )

SET(ITMLIB_OBJECTS_CAMERA_HEADERS
  Objects/Camera/ITMCalibIO.h
  Objects/Camera/ITMDisparityCalib.h
  Objects/Camera/ITMExtrinsics.h
  Objects/Camera/ITMIntrinsics.h
  Objects/Camera/ITMRGBDCalib.h
  )

##
SET(ITMLIB_OBJECTS_MESHING_HEADERS
  Objects/Meshing/ITMMesh.h
  )

##
SET(ITMLIB_OBJECTS_MISC_HEADERS
  Objects/Misc/ITMIMUCalibrator.h
  Objects/Misc/ITMIMUMeasurement.h
  Objects/Misc/ITMPointCloud.h
  )

SET(ITMLIB_OBJECTS_RENDERSTATES_HEADERS
  Objects/RenderStates/ITMRenderState.h
  )

##
SET(ITMLIB_OBJECTS_SCENE_HEADERS
  Objects/Scene/ITMScene.h
  Objects/Scene/ITMScene.cu
  Objects/Scene/ITMSummingVoxel.h
  Objects/Scene/ITMVoxelTypes.h
  Objects/Scene/TSDF.h
  Objects/Scene/TSDF_CPU.h
  Objects/Scene/TSDF_CUDA.h
  )

##
SET(ITMLIB_OBJECTS_TRACKING_HEADERS
  Objects/Tracking/ITMHierarchyLevel.h
  Objects/Tracking/ITMDepthHierarchyLevel.h
  Objects/Tracking/ITMImageHierarchy.h
  Objects/Tracking/ITMIntensityHierarchyLevel.h
  Objects/Tracking/ITMRGBHierarchyLevel.h
  Objects/Tracking/ITMSceneHierarchyLevel.h
  Objects/Tracking/ITMTemplatedHierarchyLevel.h
  Objects/Tracking/ITMTrackingState.h
  Objects/Tracking/ITMViewHierarchyLevel.h
  Objects/Tracking/TrackerIterationType.h
  )

##
SET(ITMLIB_OBJECTS_VIEWS_HEADERS
  Objects/Views/ITMView.h
  Objects/Views/ITMViewIMU.h
  )

##
SET(ITMLIB_TRACKERS_HEADERS
  Trackers/ITMTrackerFactory.h
  )

##
SET(ITMLIB_TRACKERS_CPU_SOURCES
  Trackers/CPU/ITMColorTracker_CPU.cpp
  Trackers/CPU/ITMICPTracker_CPU.cpp
  Trackers/CPU/ITMExtendedTracker_CPU.cpp
  )

SET(ITMLIB_TRACKERS_CPU_HEADERS
  Trackers/CPU/ITMColorTracker_CPU.h
  Trackers/CPU/ITMICPTracker_CPU.h
  Trackers/CPU/ITMExtendedTracker_CPU.h
  )

##
SET(ITMLIB_TRACKERS_CUDA_SOURCES
  Trackers/CUDA/ITMColorTracker_CUDA.cu
  Trackers/CUDA/ITMICPTracker_CUDA.cu
  Trackers/CUDA/ITMExtendedTracker_CUDA.cu

  )

SET(ITMLIB_TRACKERS_CUDA_HEADERS
  Trackers/CUDA/ITMColorTracker_CUDA.h
  Trackers/CUDA/ITMICPTracker_CUDA.h
  Trackers/CUDA/ITMExtendedTracker_CUDA.h
  )

##
SET(ITMLIB_TRACKERS_INTERFACE_SOURCES
  Trackers/Interface/ITMColorTracker.cpp
  Trackers/Interface/ITMICPTracker.cpp
  Trackers/Interface/ITMExtendedTracker.cpp
  Trackers/Interface/ITMFileBasedTracker.cpp
  Trackers/Interface/ITMForceFailTracker.cpp
  Trackers/Interface/ITMIMUTracker.cpp
  )

SET(ITMLIB_TRACKERS_INTERFACE_HEADERS
  Trackers/Interface/ITMColorTracker.h
  Trackers/Interface/ITMCompositeTracker.h
  Trackers/Interface/ITMICPTracker.h
  Trackers/Interface/ITMExtendedTracker.h
  Trackers/Interface/ITMFileBasedTracker.h
  Trackers/Interface/ITMForceFailTracker.h
  Trackers/Interface/ITMIMUTracker.h
  Trackers/Interface/ITMTracker.h
  )

##
SET(ITMLIB_TRACKERS_SHARED_HEADERS
  Trackers/Shared/ITMTracker_Shared.h
  Trackers/Shared/ITMColorTracker_Shared.h
  Trackers/Shared/ITMICPTracker_Shared.h
  Trackers/Shared/ITMExtendedTracker_Shared.h
  )

##
SET(ITMLIB_UTILS_SOURCES
  Utils/ITMLibSettings.cpp
  )

SET(ITMLIB_UTILS_HEADERS
  Utils/ITMCUDAUtils.h
  Utils/ITMFusionParams.h
  Utils/ITMImageTypes.h
  Utils/ITMLibSettings.h
  Utils/ITMMath.h
  Utils/ITMMemoryBlockTypes.h
  Utils/ITMPixelUtils.h
  Utils/ITMProjectionUtils.h
  Utils/ITMSceneParams.h
  Utils/ITMStringUtils.h
  Utils/ITMTimer.h
  )

#################################################################
# Collect the project files into sources, headers and templates #
#################################################################

SET(sources
  ${ITMLIB_TOPLEVEL_CPU_SOURCES}
  ${ITMLIB_TOPLEVEL_CUDA_SOURCES}
  ${ITMLIB_CORE_SOURCES}
  ${ITMLIB_ENGINES_LOWLEVEL_SOURCES}
  ${ITMLIB_ENGINES_LOWLEVEL_CPU_SOURCES}
  ${ITMLIB_ENGINES_LOWLEVEL_CUDA_SOURCES}
  ${ITMLIB_ENGINES_MESHING_CPU_SOURCES}
  ${ITMLIB_ENGINES_MESHING_CUDA_SOURCES}
  ${ITMLIB_ENGINES_RECONSTRUCTION_SOURCES}
  ${ITMLIB_ENGINES_RECONSTRUCTION_CPU_SOURCES}
  ${ITMLIB_ENGINES_RECONSTRUCTION_CUDA_SOURCES}
  ${ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_SOURCES}
  ${ITMLIB_ENGINES_STATS_SOURCES}
  ${ITMLIB_ENGINES_VIEWBUILDING_SOURCES}
  ${ITMLIB_ENGINES_VIEWBUILDING_CPU_SOURCES}
  ${ITMLIB_ENGINES_VIEWBUILDING_CUDA_SOURCES}
  ${ITMLIB_ENGINES_VISUALISATION_SOURCES}
  ${ITMLIB_ENGINES_VISUALISATION_CPU_SOURCES}
  ${ITMLIB_ENGINES_VISUALISATION_CUDA_SOURCES}
  ${ITMLIB_ENGINES_VISUALISATION_INTERFACE_SOURCES}
  ${ITMLIB_OBJECTS_CAMERA_SOURCES}
  ${ITMLIB_OBJECTS_RENDERSTATES_SOURCES}
  ${ITMLIB_TRACKERS_CPU_SOURCES}
  ${ITMLIB_TRACKERS_CUDA_SOURCES}
  ${ITMLIB_TRACKERS_INTERFACE_SOURCES}
  ${ITMLIB_UTILS_SOURCES}
  )

SET(headers
  ${ITMLIB_TOPLEVEL_HEADERS}
  ${ITMLIB_CORE_HEADERS}
  ${ITMLIB_ENGINES_LOWLEVEL_HEADERS}
  ${ITMLIB_ENGINES_LOWLEVEL_CPU_HEADERS}
  ${ITMLIB_ENGINES_LOWLEVEL_CUDA_HEADERS}
  ${ITMLIB_ENGINES_LOWLEVEL_INTERFACE_HEADERS}
  ${ITMLIB_ENGINES_LOWLEVEL_SHARED_HEADERS}
  ${ITMLIB_ENGINES_MESHING_HEADERS}
  ${ITMLIB_ENGINES_MESHING_CPU_HEADERS}
  ${ITMLIB_ENGINES_MESHING_CUDA_HEADERS}
  ${ITMLIB_ENGINES_MESHING_INTERFACE_HEADERS}
  ${ITMLIB_ENGINES_MESHING_SHARED_HEADERS}
  ${ITMLIB_ENGINES_RECONSTRUCTION_HEADERS}
  ${ITMLIB_ENGINES_RECONSTRUCTION_CPU_HEADERS}
  ${ITMLIB_ENGINES_RECONSTRUCTION_CUDA_HEADERS}
  ${ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_HEADERS}
  ${ITMLIB_ENGINES_RECONSTRUCTION_SHARED_HEADERS}
  ${ITMLIB_ENGINES_STATS_HEADERS}
  ${ITMLIB_ENGINES_VIEWBUILDING_HEADERS}
  ${ITMLIB_ENGINES_VIEWBUILDING_CPU_HEADERS}
  ${ITMLIB_ENGINES_VIEWBUILDING_CUDA_HEADERS}
  ${ITMLIB_ENGINES_VIEWBUILDING_INTERFACE_HEADERS}
  ${ITMLIB_ENGINES_VIEWBUILDING_SHARED_HEADERS}
  ${ITMLIB_ENGINES_VISUALISATION_HEADERS}
  ${ITMLIB_ENGINES_VISUALISATION_CPU_HEADERS}
  ${ITMLIB_ENGINES_VISUALISATION_CUDA_HEADERS}
  ${ITMLIB_ENGINES_VISUALISATION_INTERFACE_HEADERS}
  ${ITMLIB_ENGINES_VISUALISATION_SHARED_HEADERS}
  ${ITMLIB_OBJECTS_CAMERA_HEADERS}
  ${ITMLIB_OBJECTS_MESHING_HEADERS}
  ${ITMLIB_OBJECTS_MISC_HEADERS}
  ${ITMLIB_OBJECTS_RENDERSTATES_HEADERS}
  ${ITMLIB_OBJECTS_SCENE_HEADERS}
  ${ITMLIB_OBJECTS_TRACKING_HEADERS}
  ${ITMLIB_OBJECTS_VIEWS_HEADERS}
  ${ITMLIB_TRACKERS_HEADERS}
  ${ITMLIB_TRACKERS_CPU_HEADERS}
  ${ITMLIB_TRACKERS_CUDA_HEADERS}
  ${ITMLIB_TRACKERS_INTERFACE_HEADERS}
  ${ITMLIB_TRACKERS_SHARED_HEADERS}
  ${ITMLIB_UTILS_HEADERS}
  )

#############################
# Specify the source groups #
#############################

SOURCE_GROUP("" FILES ${ITMLIB_TOPLEVEL_CPU_SOURCES} ${ITMLIB_TOPLEVEL_CUDA_SOURCES} ${ITMLIB_TOPLEVEL_HEADERS})
SOURCE_GROUP(Core FILES ${ITMLIB_CORE_SOURCES} ${ITMLIB_CORE_HEADERS})
SOURCE_GROUP(Engines\\LowLevel FILES ${ITMLIB_ENGINES_LOWLEVEL_SOURCES} ${ITMLIB_ENGINES_LOWLEVEL_HEADERS})
SOURCE_GROUP(Engines\\LowLevel\\CPU FILES ${ITMLIB_ENGINES_LOWLEVEL_CPU_SOURCES} ${ITMLIB_ENGINES_LOWLEVEL_CPU_HEADERS})
SOURCE_GROUP(Engines\\LowLevel\\CUDA FILES ${ITMLIB_ENGINES_LOWLEVEL_CUDA_SOURCES} ${ITMLIB_ENGINES_LOWLEVEL_CUDA_HEADERS})
SOURCE_GROUP(Engines\\LowLevel\\Interface FILES ${ITMLIB_ENGINES_LOWLEVEL_INTERFACE_HEADERS})
SOURCE_GROUP(Engines\\LowLevel\\Shared FILES ${ITMLIB_ENGINES_LOWLEVEL_SHARED_HEADERS})
SOURCE_GROUP(Engines\\Meshing FILES ${ITMLIB_ENGINES_MESHING_HEADERS})
SOURCE_GROUP(Engines\\Meshing\\CPU FILES ${ITMLIB_ENGINES_MESHING_CPU_SOURCES} ${ITMLIB_ENGINES_MESHING_CPU_HEADERS})
SOURCE_GROUP(Engines\\Meshing\\CUDA FILES ${ITMLIB_ENGINES_MESHING_CUDA_SOURCES} ${ITMLIB_ENGINES_MESHING_CUDA_HEADERS})
SOURCE_GROUP(Engines\\Meshing\\Interface FILES ${ITMLIB_ENGINES_MESHING_INTERFACE_HEADERS})
SOURCE_GROUP(Engines\\Meshing\\Shared FILES ${ITMLIB_ENGINES_MESHING_SHARED_HEADERS})
SOURCE_GROUP(Engines\\Reconstruction FILES ${ITMLIB_ENGINES_RECONSTRUCTION_SOURCES} ${ITMLIB_ENGINES_RECONSTRUCTION_HEADERS})
SOURCE_GROUP(Engines\\Reconstruction\\CPU FILES ${ITMLIB_ENGINES_RECONSTRUCTION_CPU_SOURCES} ${ITMLIB_ENGINES_RECONSTRUCTION_CPU_HEADERS})
SOURCE_GROUP(Engines\\Reconstruction\\CUDA FILES ${ITMLIB_ENGINES_RECONSTRUCTION_CUDA_SOURCES} ${ITMLIB_ENGINES_RECONSTRUCTION_CUDA_HEADERS})
SOURCE_GROUP(Engines\\Reconstruction\\Interface FILES ${ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_SOURCES} ${ITMLIB_ENGINES_RECONSTRUCTION_INTERFACE_HEADERS})
SOURCE_GROUP(Engines\\Reconstruction\\Shared FILES ${ITMLIB_ENGINES_RECONSTRUCTION_SHARED_HEADERS})
SOURCE_GROUP(Engines\\Stats FILES ${ITMLIB_ENGINES_STATS_SOURCES} ${ITMLIB_ENGINES_STATS_HEADERS})
SOURCE_GROUP(Engines\\ViewBuilding FILES ${ITMLIB_ENGINES_VIEWBUILDING_SOURCES} ${ITMLIB_ENGINES_VIEWBUILDING_HEADERS})
SOURCE_GROUP(Engines\\ViewBuilding\\CPU FILES ${ITMLIB_ENGINES_VIEWBUILDING_CPU_SOURCES} ${ITMLIB_ENGINES_VIEWBUILDING_CPU_HEADERS})
SOURCE_GROUP(Engines\\ViewBuilding\\CUDA FILES ${ITMLIB_ENGINES_VIEWBUILDING_CUDA_SOURCES} ${ITMLIB_ENGINES_VIEWBUILDING_CUDA_HEADERS})
SOURCE_GROUP(Engines\\ViewBuilding\\Interface FILES ${ITMLIB_ENGINES_VIEWBUILDING_INTERFACE_HEADERS})
SOURCE_GROUP(Engines\\ViewBuilding\\Shared FILES ${ITMLIB_ENGINES_VIEWBUILDING_SHARED_HEADERS})
SOURCE_GROUP(Engines\\Visualisation FILES ${ITMLIB_ENGINES_VISUALISATION_SOURCES} ${ITMLIB_ENGINES_VISUALISATION_HEADERS})
SOURCE_GROUP(Engines\\Visualisation\\CPU FILES ${ITMLIB_ENGINES_VISUALISATION_CPU_SOURCES} ${ITMLIB_ENGINES_VISUALISATION_CPU_HEADERS})
SOURCE_GROUP(Engines\\Visualisation\\CUDA FILES ${ITMLIB_ENGINES_VISUALISATION_CUDA_SOURCES} ${ITMLIB_ENGINES_VISUALISATION_CUDA_HEADERS})
SOURCE_GROUP(Engines\\Visualisation\\Interface FILES ${ITMLIB_ENGINES_VISUALISATION_INTERFACE_SOURCES} ${ITMLIB_ENGINES_VISUALISATION_INTERFACE_HEADERS})
SOURCE_GROUP(Engines\\Visualisation\\Shared FILES ${ITMLIB_ENGINES_VISUALISATION_SHARED_HEADERS})
SOURCE_GROUP(Engines\\Visualisation\\Shared FILES ${ITMLIB_ENGINES_VISUALISATION_SHARED_HEADERS})
SOURCE_GROUP(Objects\\Camera FILES ${ITMLIB_OBJECTS_CAMERA_SOURCES} ${ITMLIB_OBJECTS_CAMERA_HEADERS})
SOURCE_GROUP(Objects\\Meshing FILES ${ITMLIB_OBJECTS_MESHING_HEADERS})
SOURCE_GROUP(Objects\\Misc FILES ${ITMLIB_OBJECTS_MISC_HEADERS})
SOURCE_GROUP(Objects\\RenderStates FILES ${ITMLIB_OBJECTS_RENDERSTATES_SOURCES} ${ITMLIB_OBJECTS_RENDERSTATES_HEADERS})
SOURCE_GROUP(Objects\\Scene FILES ${ITMLIB_OBJECTS_SCENE_HEADERS})
SOURCE_GROUP(Objects\\Tracking FILES ${ITMLIB_OBJECTS_TRACKING_HEADERS})
SOURCE_GROUP(Objects\\Views FILES ${ITMLIB_OBJECTS_VIEWS_HEADERS})
SOURCE_GROUP(Trackers FILES ${ITMLIB_TRACKERS_HEADERS})
SOURCE_GROUP(Trackers\\CPU FILES ${ITMLIB_TRACKERS_CPU_SOURCES} ${ITMLIB_TRACKERS_CPU_HEADERS})
SOURCE_GROUP(Trackers\\CUDA FILES ${ITMLIB_TRACKERS_CUDA_SOURCES} ${ITMLIB_TRACKERS_CUDA_HEADERS})
SOURCE_GROUP(Trackers\\Interface FILES ${ITMLIB_TRACKERS_INTERFACE_SOURCES} ${ITMLIB_TRACKERS_INTERFACE_HEADERS})
SOURCE_GROUP(Trackers\\Shared FILES ${ITMLIB_TRACKERS_SHARED_HEADERS})
SOURCE_GROUP(Utils FILES ${ITMLIB_UTILS_SOURCES} ${ITMLIB_UTILS_HEADERS})

##########################################
# Specify the target and where to put it #
##########################################

INCLUDE(${PROJECT_SOURCE_DIR}/cmake/Flags.cmake)
IF (WITH_CUDA)
  CUDA_ADD_LIBRARY(${targetname} STATIC ${sources} ${headers} ${templates})
ELSE ()
  ADD_LIBRARY(${targetname} STATIC ${sources} ${headers} ${templates})
ENDIF ()
ADD_DEPENDENCIES(${targetname} yaml-cpp-project)
TARGET_LINK_LIBRARIES(${targetname} yaml-cpp stdgpu::stdgpu)
